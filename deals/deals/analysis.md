# –î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–ª–∞–Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è PostgreSQL (EXPLAIN ANALYZE)

## –û—Å–Ω–æ–≤–Ω—ã–µ —É–∑–ª—ã –∏ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

| –£—á–∞—Å—Ç–æ–∫ –ø–ª–∞–Ω–∞ | –í—Ä–µ–º—è (ms) | –î–æ–ª—è –æ—Ç –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ | –°—Ç–µ–ø–µ–Ω—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –≤–∫–ª–∞–¥ (Œît –ø—Ä–∏ —É–ª—É—á—à–µ–Ω–∏–∏, %) | –°—Ç–æ–∏—Ç –ª–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------------|-------------|--------------------------|----------------------|---------------------------------------------|--------------------------|--------------|
| **Nested Loop + Join Filter** | 101 502 ‚Üí 117 238 | ‚âà77-89 % | ‚ùå –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ | üîª –¥–æ ‚Äì70 % –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –Ω–∞ Hash Join/–ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã | üü• –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –ì–ª–∞–≤–Ω—ã–π —É–∑–∫–∏–π —É—á–∞—Å—Ç–æ–∫: —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–∞–º –∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –±–æ–ª—å—à–∏–º —á–∏—Å–ª–æ–º —Å—Ç—Ä–æ–∫ |
| **Parallel Hash Join (d.rieltor_id = e.employee_id)** | 99 373 ‚Üí 106 990 | ‚âà76-82 % | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–µ | üîª –¥–æ ‚Äì60 % –ø—Ä–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ —É–º–µ–Ω—å—à–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ —Ç–∞–±–ª–∏—Ü | ‚úÖ –î–∞ | –ë–æ–ª—å—à–æ–π –≤–∫–ª–∞–¥ –∏–∑-–∑–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è ~24 –º–ª–Ω —Å—Ç—Ä–æ–∫ |
| **Parallel Seq Scan on "278_6_deal"** | 74 ‚Üí 61 547 | ‚âà0.1-47 % | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–µ | üîª –¥–æ ‚Äì10 % –ø—Ä–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (LOWER, –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –¥–∞—Ç) | ‚úÖ –î–∞ | –§–∏–ª—å—Ç—Ä—ã —É–±–∏—Ä–∞—é—Ç ~28k —Å—Ç—Ä–æ–∫, –º–æ–∂–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å CPU |
| **Parallel Seq Scan on employees** | 1 053 ‚Üí 35 824 | ‚âà1-27 % | ‚ö†Ô∏è –°–ª–∞–±–æ | üîª –¥–æ ‚Äì10 % –ø—Ä–∏ —É–ø—Ä–æ—â–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (`department_name`, `period`) | ‚úÖ –î–∞ | –£–¥–∞–ª—è–µ—Ç ~81k —Å—Ç—Ä–æ–∫, –±–æ–ª—å—à–æ–π –æ–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö |
| **Hash + Seq Scan on cities** | 0.675 ‚Üí 2 267 | <0.1 % | ‚úÖ –•–æ—Ä–æ—à–æ | üîª 0 % | ‚ö™ –ù–µ—Ç | –ú–∞–ª–µ–Ω—å–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–µ –Ω—É–∂–Ω–∞ |
| **CTE dates_cte** | 0.136 ‚Üí 0.235 | <0.01 % | ‚úÖ –•–æ—Ä–æ—à–æ | üîª 0 % | ‚ö™ –ù–µ—Ç | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ |
| **JIT Compilation** | 8 941 | ‚âà7 % | ‚öôÔ∏è –ù–æ—Ä–º–∞–ª—å–Ω–æ | üîª –¥–æ ‚Äì1 % | ‚ö™ –ù–µ—Ç | –í—Ä–µ–º—è JIT –∞–¥–µ–∫–≤–∞—Ç–Ω–æ–µ –¥–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ |
| **Aggregate —Ñ–∏–Ω–∞–ª—å–Ω—ã–π** | 130 966 ‚Üí 130 997 | 100 % | ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–æ | ‚Äî | ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–Ω–∞ | –û—Å–Ω–æ–≤–Ω–æ–µ –≤—Ä–µ–º—è ‚Äî Nested Loop –∏ Hash Join |

## –î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –≤—ã–≤–æ–¥—ã

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –û–ø–µ—Ä–∞—Ü–∏—è | –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª —É—Å–∫–æ—Ä–µ–Ω–∏—è | –î–µ–π—Å—Ç–≤–∏–µ |
|------------|-----------|---------------------|-----------|
| üü• **1 (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π)** | Nested Loop + —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–∞–º | üöÄ –¥–æ 70-80 % | –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ Hash Join/–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã, —É–±—Ä–∞—Ç—å CTE –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ |
| üüß **2 (–≤—ã—Å–æ–∫–∏–π)** | Parallel Hash Join d.rieltor_id = e.employee_id | ‚ö° –¥–æ 60 % | –°—É–∑–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã, —É–º–µ–Ω—å—à–∏—Ç—å –æ–±—ä—ë–º —Ç–∞–±–ª–∏—Ü, –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ª–æ–≥–∏–∫—É —Ñ–∏–ª—å—Ç—Ä–æ–≤ |
| üü® **3 (—É–º–µ—Ä–µ–Ω–Ω—ã–π)** | Parallel Seq Scan –Ω–∞ deals –∏ employees | ‚öôÔ∏è –¥–æ 10 % | –£–±—Ä–∞—Ç—å LOWER, –ø—Ä–µ–¥–≤—ã—á–∏—Å–ª–∏—Ç—å –¥–∞—Ç—ã, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —É—Å–ª–æ–≤–∏—è WHERE |
| üü© **4 (–Ω–∏–∑–∫–∏–π)** | cities, dates_cte, JIT | üí† < 1 % | –ù–µ —Ç—Ä–æ–≥–∞—Ç—å ‚Äî –º–∞–ª–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ–±—â–µ–µ –≤—Ä–µ–º—è |